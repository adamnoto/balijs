"use strict";function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(a,t,n){return t&&e(a.prototype,t),n&&e(a,n),a}}(),Bali=function(){function e(a){_classCallCheck(this,e),this.state={mappedTypes:{}},this.parseRules(a)}return _createClass(e,[{key:"getDefinitions",value:function(){return this.state.mappedTypes}},{key:"parseRules",value:function(e){for(var a in e){var t=e[a];t(this.rulerFor(a))}}},{key:"initializeType",value:function(e){this.state.mappedTypes[e]||(this.state.mappedTypes[e]={canAll:[],can:{},cannot:{}})}},{key:"rulerFor",value:function(e){var a=this;return{canAll:function(t){a.initializeType(t),a.state.mappedTypes[t].canAll.push(e)},can:function(t,n){a.initializeType(n);var i=a.state.mappedTypes[n].can[t];i||(i=a.state.mappedTypes[n].can[t]=[]),i.push(e)}}}},{key:"hasDefinedRole",value:function(e){for(var a in this.state.mappedTypes){if(this.state.mappedTypes[a].canAll.indexOf(e)>=0)return!0;for(var t in this.state.mappedTypes[a].can)if(this.state.mappedTypes[a].can[t].indexOf(e)>=0)return!0}return!1}},{key:"can",value:function(e,a,t){for(var n="[object Array]"!=Object.prototype.toString.call(e)?[e]:e,i=0;i<n.length;i++){var r=n[i],s=this.getDefinitions()[t],l=!1;if(s&&(s.can[a]&&(l=s.can[a].indexOf(r)>=0),l===!1&&s.canAll&&(l=s.canAll.indexOf(r)>=0)),l===!0)return!0}return!1}}],[{key:"mapRules",value:function(a){return new e(a)}}]),e}();Bali.globalName="Bali",module.exports=Bali;
//# sourceMappingURL=./distribution/bali.min.map